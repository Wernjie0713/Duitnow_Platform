import{r as d,j as e,q as x,W as h}from"./app-BInyTVnr.js";import{I as b}from"./InputError-h2N5He5a.js";import{I as j}from"./InputLabel-g4LwdM0q.js";import{B as n}from"./button-ATLo96f5.js";import{D,a as v,b as y,c as I,d as _,e as w,f as N}from"./dialog-Dcq1l1js.js";import{c as T}from"./utils-BM_CldAA.js";import C from"./GuideForImage-DXqJFDgV.js";import"./index-AUrxdhlQ.js";import"./createLucideIcon-CmJIiB7B.js";const c=d.forwardRef(({className:r,type:s,...o},i)=>e.jsx("input",{type:s,className:T("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:i,...o}));c.displayName="Input";function G(){x().props.auth.user;const{data:r,setData:s,post:o,processing:i,errors:l,reset:m}=h({image_url:null}),[u,t]=d.useState(!1),p=a=>{a.target.files&&a.target.files[0]&&s("image_url",a.target.files[0])},g=a=>{a.preventDefault(),a.stopPropagation(),new FormData().append("image_url",r.image_url),o(route("transactions.store"),{onSuccess:()=>{m("image_url"),t(!1),alert("Image uploaded successfully! Extracted text will be shown.")},onError:f=>{console.error("Transaction upload failed:",f),alert("Failed to upload the transaction. Please try again.")}})};return e.jsxs(D,{open:u,onOpenChange:t,children:[e.jsx(v,{asChild:!0,children:e.jsx(n,{onClick:()=>t(!0),children:"+ Upload Transaction"})}),e.jsxs(y,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(_,{children:"Upload Transaction"}),e.jsxs(w,{children:["Please upload your transaction ",e.jsx("b",{className:"font-bold",children:e.jsx("u",{children:"image"})}),". The relevant details will be extracted automatically."]})]}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(j,{htmlFor:"image_url",value:"Proof of Transaction"}),e.jsx(c,{type:"file",id:"image_url",name:"image_url",onChange:p,className:"mt-1 block w-[280px]",required:!0})]}),l.image_url!=null&&e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx("p",{}),e.jsx(b,{message:l.image_url,className:"col-span-3"})]})]}),e.jsx(C,{}),e.jsx(N,{children:e.jsx(n,{type:"submit",children:"Upload"})})]})]})]})}export{G as default};
