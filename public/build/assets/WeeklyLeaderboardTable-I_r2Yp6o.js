import{c as F,g as H,j as e,r as h,a as L}from"./app-DAekorQq.js";import{T as y,a as D,b as N,c as n,d as T,e as s}from"./table-BOrodO1S.js";import{d as u}from"./dayjs.min-DoSYN2N2.js";import{B as M}from"./button-CI866Qz_.js";import"./utils-BM_CldAA.js";import"./index-COzFNtqB.js";var W={exports:{}};(function(x,a){(function(i,b){x.exports=b()})(F,function(){return function(i,b,o){b.prototype.isBetween=function(l,k,c,f){var p=o(l),m=o(k),w=(f=f||"()")[0]==="(",j=f[1]===")";return(w?this.isAfter(p,c):!this.isBefore(p,c))&&(j?this.isBefore(m,c):!this.isAfter(m,c))||(w?this.isBefore(p,c):!this.isAfter(p,c))&&(j?this.isAfter(m,c):!this.isBefore(m,c))}}})})(W);var R=W.exports;const G=H(R);u.extend(G);function Q({users:x,current_user:a,isAdmin:i,selectedNumber:b,links:o,selectedTime:l,weeklyAll:k}){if(!x||x.length===0)return e.jsx("div",{className:"rounded-lg overflow-hidden shadow-lg border border-gray-200",children:e.jsxs(y,{children:[e.jsx(D,{children:e.jsxs(N,{className:"bg-black hover:bg-black",children:[e.jsx(n,{className:"w-[30%] font-semibold text-white",children:"No."}),e.jsx(n,{className:"w-[30%] font-semibold text-white",children:"Name"}),e.jsx(n,{className:"w-[25%] font-semibold text-white",children:"Transaction Count"})]})}),e.jsxs(T,{children:[e.jsx(N,{}),e.jsx(s,{children:"No users found."})]})]})});const[c,f]=h.useState("total_count"),[p,m]=h.useState(""),[w,j]=h.useState("");h.useEffect(()=>{const t=u("2024-12-28"),r=u("2024-11-10"),C=u("2024-12-31");if(t.isBetween(r,C,null,"[]")){const g=t.diff(r,"day");let d=Math.ceil((g+1)/7);if(d>=1&&d<=8){f(`week${d}_count`);const I=(()=>{switch(d){case 1:return"November 10th, 2024 (12:00 a.m) - November 16th, 2024 (11:59 p.m)";case 2:return"November 17th, 2024 (12:00 a.m) - November 23th, 2024 (11:59 p.m)";case 3:return"November 24th, 2024 (12:00 a.m) - November 30th, 2024 (11:59 p.m)";case 4:return"December 1st, 2024 (12:00 a.m) - December 7th, 2024 (11:59 p.m)";case 5:return"December 8th, 2024 (12:00 a.m) - December 14th, 2024 (11:59 p.m)";case 6:return"December 15th, 2024 (12:00 a.m) - December 21th, 2024 (11:59 p.m)";case 7:return"December 22th, 2024 (12:00 a.m) - December 28th, 2024 (11:59 p.m)";case 8:return"December 29th, 2024 (12:00 a.m) - December 31th, 2024 (11:59 p.m)";default:return"September 1st, 2024 (12:00 a.m) - September 30th, 2024 (11:59 p.m)"}})(),P=(()=>{switch(d){case 1:return"Week 1 Top 10";case 2:return"Week 2 Top 10";case 3:return"Week 3 Top 10";case 4:return"Week 4 Top 10";case 5:return"Week 5 Top 10";case 6:return"Week 6 Top 10";case 7:return"Week 7 Top 10";case 8:return"Week 8 Top 10";default:return"Week 0 Top 10"}})();m(I),j(P)}}else{const g="September 1st, 2024 (12:00 a.m) - September 30th, 2024 (11:59 p.m)",d="Week 0 Top 10";m(g),j(d)}},[]),h.useEffect(()=>{if(l!==0&&l>=1&&l<=13){f(`week${l}_count`);const t=(()=>{switch(l){case 1:return"November 10th, 2024 (12:00 a.m) - November 16th, 2024 (11:59 p.m)";case 2:return"November 17th, 2024 (12:00 a.m) - November 23th, 2024 (11:59 p.m)";case 3:return"November 24th, 2024 (12:00 a.m) - November 30th, 2024 (11:59 p.m)";case 4:return"December 1st, 2024 (12:00 a.m) - December 7th, 2024 (11:59 p.m)";case 5:return"December 8th, 2024 (12:00 a.m) - December 14th, 2024 (11:59 p.m)";case 6:return"December 15th, 2024 (12:00 a.m) - December 21th, 2024 (11:59 p.m)";case 7:return"December 22th, 2024 (12:00 a.m) - December 28th, 2024 (11:59 p.m)";case 8:return"December 29th, 2024 (12:00 a.m) - December 31th, 2024 (11:59 p.m)";default:return"September 1st, 2024 (12:00 a.m) - September 30th, 2024 (11:59 p.m)"}})(),r=(()=>{switch(l){case 1:return"Week 1 Top 10";case 2:return"Week 2 Top 10";case 3:return"Week 3 Top 10";case 4:return"Week 4 Top 10";case 5:return"Week 5 Top 10";case 6:return"Week 6 Top 10";case 7:return"Week 7 Top 10";case 8:return"Week 8 Top 10";default:return"Week 0 Top 10"}})();m(t),j(r)}},[l]);const v=k.findIndex(t=>t.id===a.id)+1;console.log(v);const[$,S]=h.useState(1);h.useEffect(()=>{if(o&&o.length>0){const t=o.find(r=>r.active);t&&S(parseInt(t.label))}},[o]);const E=($-1)*10,B=()=>{window.location.href=route("export.weekly-leaderboard",{week:l})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative flex flex-col sm:flex-row items-center justify-between pt-4 pb-2",children:[e.jsx("div",{className:"sm:w-1/4 mb-4 sm:mb-0"}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 text-center whitespace-nowrap",children:b!==10?`${w}0`:w}),!i&&e.jsx("div",{className:"sm:w-1/4 mb-4 sm:mb-0"}),i&&e.jsx("div",{className:"sm:w-1/4 flex justify-end mt-4 sm:mt-0",children:e.jsx(M,{onClick:B,children:"Export to Excel"})})]}),e.jsx("div",{className:"text-center pb-4",children:e.jsx("p",{className:"text-gray-600",children:e.jsx("span",{className:"font-medium",children:p})})}),e.jsx("div",{className:"rounded-lg overflow-hidden shadow-lg border border-gray-200",children:e.jsxs(y,{children:[e.jsx(D,{children:e.jsxs(N,{className:"bg-black hover:bg-black",children:[e.jsx(n,{className:"w-[5%] text-center font-semibold text-white",children:"No."}),e.jsx(n,{className:"w-[30%] font-semibold text-white",children:"Name"}),i&&e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-[20%] font-semibold text-white",children:"Email"}),e.jsx(n,{className:"w-[10%] font-semibold text-white",children:"Matric No."}),e.jsx(n,{className:"w-[15%] font-semibold text-white",children:"DuitNow ID"}),e.jsx(n,{className:"w-[15%] font-semibold text-white",children:"Phone No."}),e.jsx(n,{className:"w-[10%] font-semibold text-white",children:"Faculty"}),e.jsx(n,{className:"w-[10%] font-semibold text-white",children:"Campus"})]}),e.jsx(n,{className:"w-[10%] text-center font-semibold text-white",children:"Transaction Count"})]})}),e.jsxs(T,{children:[x.slice(0,10).map((t,r)=>e.jsxs(N,{className:`hover:bg-gray-100 transition-colors duration-200 ${t.id===a.id?"bg-gray-200":""}`,children:[e.jsxs(s,{className:`text-center font-normal ${t.id===a.id?"text-black font-black":""}`,children:[E+r+1,"."]}),e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.name}),i&&e.jsxs(e.Fragment,{children:[e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.email}),e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.matric_no}),e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.duitnow_id}),e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.phone_no}),e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.faculty}),e.jsx(s,{className:`font-normal ${t.id===a.id?"text-black font-black":""}`,children:t.campus})]}),e.jsx(s,{className:`font-normal text-center ${t.id===a.id?"text-black font-black":""}`,children:t[c]})]},t.id)),!i&&!x.slice(0,10).some(t=>t.id===a.id)&&e.jsxs(N,{className:"hover:bg-gray-100 transition-colors duration-200 bg-gray-200",children:[e.jsxs(s,{className:"text-center font-normal text-black font-black",children:[v,"."]}),e.jsx(s,{className:"font-normal text-black font-black",children:a.name}),e.jsx(s,{className:"font-normal text-center text-black font-black",children:a[c]})]},a.id)]})]})}),b!==10&&o&&o.length>0&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx("nav",{"aria-label":"Page navigation",children:e.jsx("ul",{className:"inline-flex rounded-md shadow-sm",children:o.map((t,r)=>e.jsx("li",{children:e.jsx(L,{href:t.url,className:`px-2 py-1 sm:px-4 sm:py-2 text-xs sm:text-sm font-medium border ${r===0?"rounded-l-md":""} ${r===o.length-1?"rounded-r-md":""} ${t.active?"bg-black text-white border-gray-500 hover:bg-black hover:text-white":"bg-white text-gray-700 border-gray-300 hover:bg-gray-200"} ${t.url?"hover:text-gray-700":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}})},r))})})})]})}export{Q as default};
